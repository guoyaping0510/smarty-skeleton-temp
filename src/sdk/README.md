# samrty-skeleton
1. 第一次进来时无骨架屏,进来后3S可中断恢复开始递归DOM节点 生成缓存DOM 缓存至indexDB 下次进来时loading状态下显示缓存DOM结构 作为平滑过渡 提升体验 缓存key由当前页面路由innerWidth innerHeight以及相对页面的ID组成 相对此视口为此DOM生成固定宽高 因为子元素相对父元素绝对定位
2. localStorage 已经存放满了,此方法生成DOM一般几十KB或者几百KB,所以存放indexDB中,浏览器不支持那么不支持此功能,从indexDB中读取缓存DOM,为异步操作,一般有0.0几秒的延迟  此段时间不显示任何 否则显示真实DOM 真实DOM->缓存DOM->真实DOM, 真个变化过程,会造成闪动现象
3. 为避免影响响应及性能,使用兼容requestIdleCallback分解长任务, 使用队列递归DOM 使递归可中断,
4. 显示使用absolute定位 加载完成后利用opacity过渡消失,实现渐隐藏,避免突然消失,突兀体验, 另外要渲染组件只是被覆盖,不会影响其渲染性能
5. 遍历DOM思想为一直遍历到最后一层DOM节点 判断节点可见且大于设置的最小值-》创建节点; 遇到可枚举节点直接创建灰色块 同一个父元素下同层元素与上一次节点间距小于设置值合并; 对于轮播等场景,创建灰色块时与父元素可视区取交集; 创建节点位置 宽度为相对根元素; 缓存DOM节点时会保存当前innerWidth 和innerHeight值; 缓存DOM是对当前视口宽度和高度缓存 不对其他宽度和高度的视口生效; 

 